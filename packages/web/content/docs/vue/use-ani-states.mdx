---
title: useAniStates
description: A reactive composable for managing and transitioning between multiple animation states.
---

This composable is a Vue-specific wrapper around the core `createStates` function. It's designed for components with multiple, distinct visual states (e.g., idle, hover, active) and provides a simple, reactive API to manage transitions between them.

### Example

```vue
<script setup>
import { a } from "@freestylejs/ani-core";
import { useAniRef, useAniStates } from "@freestylejs/ani-vue";
import { ref } from "vue";

// 1. Define the animations for each state.
const animations = {
  idle: a.ani({ to: { scale: 1, opacity: 0.7 }, duration: 0.5 }),
  hover: a.ani({ to: { scale: 1.1, opacity: 1 }, duration: 0.3 }),
};

// 2. Use the composable to create the state machine.
// It returns reactive refs and a function to transition.
const [{ timeline }, transitionTo] = useAniStates({
  initial: "idle",
  initialFrom: { scale: 1, opacity: 0.7 },
  states: animations,
});

// 3. Connect the active timeline to the DOM element for high-performance updates.
const [elementRef] = useAniRef({ timeline: timeline.value });
</script>

<template>
  <button
    :ref="elementRef"
    @mouseenter="transitionTo('hover')"
    @mouseleave="transitionTo('idle')"
    style="opacity: 0.7; scale: 1"
    class="rounded-md bg-blue-500 px-4 py-2 transition-all"
  >
    Hover Me
  </button>
</template>
```

### Usage & Concepts

#### Overview

The `useAniStates` composable simplifies stateful animation logic in Vue. It manages the active animation state and its corresponding timeline, automatically handling seamless transitions. When you call `transitionTo`, it uses the current animation's value as the starting point for the next animation, ensuring smooth, interruptible effects.

#### When to Use

-   **Do** use `useAniStates` for components with a finite number of visual states, such as buttons, interactive cards, or navigation items.
-   **Do** combine `useAniStates` with `useAniRef` for high-performance style animations that react to state changes.
-   **Don't** create the `states` object reactively, as this will create a new state machine on every change and lead to unexpected behavior.

### API Reference

#### Parameters

| Name    | Type                          | Description                                  | Default |
| :------ | :---------------------------- | :------------------------------------------- | ------- |
| `props` | `StateProps<AnimationStates>` | The configuration object for the state machine. | â€”       |

#### Return Value

The composable returns a `readonly` tuple with the following structure:

| Index | Type       | Description                                                                    |
| ----- | ---------- | ------------------------------------------------------------------------------ |
| `[0]` | `object`   | An object containing `readonly` refs for the current `state` and active `timeline`. |
| `[1]` | `function` | The `transitionTo` function to switch between animation states.                |

#### Type Definitions

```typescript
import { AnimationStateShape, StateProps, GetTimeline, StateController } from '@freestylejs/ani-core';
import { Ref } from 'vue';

declare function useAniStates<const AnimationStates extends AnimationStateShape>(
  props: StateProps<AnimationStates>
): readonly [
    {
        readonly state: Ref<keyof AnimationStates>;
        readonly timeline: Ref<GetTimeline<AnimationStates>>;
    },
    StateController<AnimationStates>['transitionTo']
];
```

### Related Components

-   [`createStates`](/en/docs/core-api/states) - The core function that this composable is built upon.
-   [`useAniRef`](/en/docs/vue/use-ani-ref) - To apply the stateful animations to the DOM.
-   [`useAni`](/en/docs/vue/use-ani) - To reactively read the animation values from the active timeline.